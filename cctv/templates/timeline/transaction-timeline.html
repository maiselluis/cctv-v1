
{% extends 'base.html'%}
 {% block title %} CCTV @ CRC | Transaction Timeline
 
 {% endblock%}
 {%block content_header%}
 <div class="app-content-header"> <!--begin::Container-->
  <div class="container-fluid"> <!--begin::Row-->
      <div class="row">
          <div class="col-sm-6">
              <h3 class="mb-0"> Timeline</h3>
             
          </div>
          <div class="col-sm-6">
              <ol class="breadcrumb float-sm-end">
                  <li class="breadcrumb-item"><a  href={% url 'index' %}>Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page"> <a  href={% url 'cash_desk_transactions-list' %}>Cash Desk Transactions</a> </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Transaction Timeline
                  </li>
              </ol>
          </div>
      </div> <!--end::Row-->
  </div> <!--end::Container-->
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
 .timeline {
    position: relative;
    max-width: 800px;
    margin: auto;
    padding: 20px 0;
}

.timeline::after {
    content: '';
    position: absolute;
    width: 4px;
    background-color: #007bff;
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -2px;
}

/* Estilos para cada item */
.timeline-item {
    padding: 20px;
    position: relative;
    background-color: inherit;
    width: 50%;
}

/* Estilos de la imagen del cliente */
.timeline-item img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
}

/* Alineación izquierda */
.left {
    left: 0;
    text-align: right;
}

/* Alineación derecha */
.right {
    left: 50%;
}

/* Estilo del contenido */
.content {
    padding: 10px 20px;
    background: white;
    position: relative;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

/* Flechas que apuntan a la línea central */
.right::before, .left::before {
    content: " ";
    position: absolute;
    top: 22px;
    width: 0;
    height: 0;
    border-style: solid;
}

/* Flecha izquierda (apunta hacia la derecha) */
.right::before {
    left: -15px;
    border-width: 8px 15px 8px 0;
    border-color: transparent white transparent transparent;
}

/* Flecha derecha (apunta hacia la izquierda) */
.left::before {
    right: -15px;
    border-width: 8px 0 8px 15px;
    border-color: transparent transparent transparent white;
}


</style>
 {%endblock%}
 {%block content%}

 <div class="card card-primary card-outline mb-4">
    <div class="card-header">
        <form method="get"> 
            <div class="container-fluid">
                <div class="row d-flex justify-content-end"> 
                    <div class="col-sm-auto d-flex align-items-center"> 
                        <label class="card-title text-start"> <strong> Transactions by Customers Timeline </strong></label>
                    </div>
    
                    <div class="col-sm-auto d-flex justify-content-end"> 
                        {{ form.location }}
                    </div>
    
                    <div class="col-sm-auto d-flex align-items-center">                  
                        <label class="card-title text-start">{{ form.date_begin.label_tag }}</label>            
                    </div> 
                    <div class="col-sm-auto d-flex justify-content-end"> 
                        {{ form.date_begin }}
                    </div> 
    
                    <div class="col-sm-auto d-flex align-items-center">     
                        <label class="card-title text-start">{{ form.date_end.label_tag }}</label> 
                    </div> 
                    <div class="col-sm-auto d-flex justify-content-end">     
                        {{ form.date_end }}
                    </div> 
    
                    <div class="col-sm-auto d-flex align-items-center">                  
                        <label class="card-title text-start">{{ form.customer.label_tag }}</label>            
                    </div> 
                    <div class="col-sm-auto d-flex justify-content-end"> 
                        {{ form.customer }} 
                    </div> 
    
                    <div class="col-sm-auto">     
                        <button class="btn btn-primary" type="submit">Find</button>               
                    </div>  
                </div>                  
            </div>                                                  
        </form>  
    </div>
    
      <div class="card-body">
      {% if transactions %}
                    <div class="timeline">
                        {% for transaction in transactions %}
                            <div class="timeline-item {% cycle 'left' 'right' %}">
                                <div class="content">
                                    <h5>{{ transaction.date }} - {{ transaction.time }}</h5>
                                    {% if transaction.customer %}
                                        <img src="{{ transaction.customer.photo.url }}" alt="Customer Photo">
                                        <p><strong>{{ transaction.customer.customer }}</strong></p>
                                    {% else %}
                                        <p><strong>Unknown Customer</strong></p>
                                    {% endif %}
                                    <p>Transaction Amount:  
                                        TT${{ transaction.tt_dolar|floatformat:2 }} |  
                                        USD${{ transaction.usd_dolar|floatformat:2 }} | 
                                        EURO€{{ transaction.euro_dolar|floatformat:2 }}  
                                    </p>
                                    <p><i class="bi bi-bank"> Account Type</i>: {{ transaction.account_type }}</p>
                                    <p> <i class="bi bi-pc-display-horizontal"> Cashier </i>: {{ transaction.area_cashier }}</p>
                                   
                                    {% if transaction.employee %}
                                    <p><i class="bi bi-person-standing"> Employee </i>: {{ transaction.employee }}</p>
                                    {% else %}
                                    <p><i class="bi bi-person-standing"> Unknown Employee</i></p>
                                {% endif %}
                                <p> <i class="bi bi-house-check"> Branch </i>: {{ transaction.location }}</p>
                                   
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    {% else %}
               
                    {% endif%}
      </div>
      <div class="card-footer">
       
        <a class="btn btn-secondary mb-2 bi-chevron"  href="{% url 'cash_desk_transactions-list' %}" > <i class="bi bi-arrow-left"> </i> Back</a> 
             
         
            </div>
 </div>





{% endblock%}
